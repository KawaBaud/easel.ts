<!DOCTYPE html>
<html>
	<head>
		<title>Three.js Minimal 3D Isometric Gouraud Shading (Importmap)</title>
		<style>
			body {
				margin: 0;
				overflow: hidden;
			}
			canvas {
				display: block;
			}
		</style>
		<script
			async
			src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"
		></script>

		<script type="importmap">
			{
				"imports": {
					"three": "https://unpkg.com/three/build/three.module.js",
					"three/addons/": "https://unpkg.com/three/examples/jsm/"
				}
			}
		</script>
	</head>
	<body>
		<script type="module">
			import * as THREE from "three";
			import { MeshGouraudMaterial } from "three/addons/materials/MeshGouraudMaterial.js";

			const scene = new THREE.Scene();
			scene.background = new THREE.Color(0xeeeeee);

			const aspect = globalThis.innerWidth / globalThis.innerHeight;
			const frustumSize = 15;
			const camera = new THREE.OrthographicCamera(
				frustumSize * aspect / -2,
				frustumSize * aspect / 2,
				frustumSize / 2,
				frustumSize / -2,
				0.1, // near
				1000, // far
			);

			const angleY = Math.PI / 4;
			const angleX = Math.atan(-1 / Math.sqrt(2));

			camera.position.set(1, 1, 1).normalize().multiplyScalar(
				frustumSize * 1.5,
			);
			camera.lookAt(scene.position);

			const renderer = new THREE.WebGLRenderer({ antialias: true });
			renderer.setSize(globalThis.innerWidth, globalThis.innerHeight);
			document.body.appendChild(renderer.domElement);

			const ambientLight = new THREE.AmbientLight(0x404040); // Soft white light
			scene.add(ambientLight);

			const directionalLight = new THREE.DirectionalLight(
				0xffffff,
				0.6,
			);
			directionalLight.position.set(1, 1, 1).normalize();
			scene.add(directionalLight);

			const boxGeometry = new THREE.BoxGeometry(1, 1, 1);

			const material1 = new MeshGouraudMaterial({ color: 0xff0000 }); // Red
			const cube1 = new THREE.Mesh(boxGeometry, material1);
			cube1.position.set(0, 0.5, 0);
			scene.add(cube1);

			const material2 = new MeshGouraudMaterial({ color: 0x00ff00 }); // Green
			const cube2 = new THREE.Mesh(boxGeometry, material2);
			cube2.position.set(1, 0.5, 0);
			scene.add(cube2);

			const material3 = new MeshGouraudMaterial({ color: 0x0000ff }); // Blue
			const cube3 = new THREE.Mesh(boxGeometry, material3);
			cube3.position.set(0, 0.5, 1);
			scene.add(cube3);

			const planeGeometry = new THREE.PlaneGeometry(10, 10);
			const planeMaterial = new THREE.MeshLambertMaterial({
				color: 0xcccccc,
			});
			const plane = new THREE.Mesh(planeGeometry, planeMaterial);
			plane.rotation.x = -Math.PI / 2;
			scene.add(plane);

			function animate() {
				globalThis.requestAnimationFrame(animate);
				renderer.render(scene, camera);
			}
			animate();

			globalThis.addEventListener("resize", () => {
				const aspect = globalThis.innerWidth / globalThis.innerHeight;
				camera.left = frustumSize * aspect / -2;
				camera.right = frustumSize * aspect / 2;
				camera.top = frustumSize / 2;
				camera.bottom = frustumSize / -2;
				camera.updateProjectionMatrix();
				renderer.setSize(globalThis.innerWidth, globalThis.innerHeight);
			});
		</script>
	</body>
</html>
